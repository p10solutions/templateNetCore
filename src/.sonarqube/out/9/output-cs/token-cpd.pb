ï
NC:\Template\templateNetCore\src\Template.Infra.Data\Context\TemplateContext.cs
	namespace 	
Template
 
. 
Cadastro 
. 
Infra !
.! "
Data" &
.& '
Context' .
{ 
public 

sealed 
class 
TemplateContext '
:( )
	DbContext* 3
{ 
public 
DbSet 
< 
TemplateEntidade %
>% &
Template' /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
modelBuilder 
. 
AddConfiguration )
() *
new* -
TemplateMap. 9
(9 :
): ;
); <
;< =
var 

cascadeFKs 
= 
modelBuilder )
.) *
Model* /
./ 0
GetEntityTypes0 >
(> ?
)? @
.  !

SelectMany! +
(+ ,
t, -
=>. 0
t1 2
.2 3
GetForeignKeys3 A
(A B
)B C
)C D
.  !
Where! &
(& '
fk' )
=>* ,
!- .
fk. 0
.0 1
IsOwnership1 <
&&= ?
fk@ B
.B C
DeleteBehaviorC Q
==R T
DeleteBehaviorU c
.c d
Cascaded k
)k l
;l m
foreach 
( 
var 
fk 
in 

cascadeFKs )
)) *
fk 
. 
DeleteBehavior !
=" #
DeleteBehavior$ 2
.2 3
Restrict3 ;
;; <
base 
. 
OnModelCreating  
(  !
modelBuilder! -
)- .
;. /
} 	
	protected   
override   
void   
OnConfiguring    -
(  - .#
DbContextOptionsBuilder  . E
optionsBuilder  F T
)  T U
{!! 	
var"" 
config"" 
="" 
new""  
ConfigurationBuilder"" 1
(""1 2
)""2 3
.## 
SetBasePath## 
(## 
	Directory## &
.##& '
GetCurrentDirectory##' :
(##: ;
)##; <
)##< =
.$$ 
AddJsonFile$$ 
($$ 
$str$$ /
)$$/ 0
.%% 
Build%% 
(%% 
)%% 
;%% 
optionsBuilder'' 
.'' 
UseSqlServer'' '
(''' (
config''( .
.''. /
GetConnectionString''/ B
(''B C
$str''C V
)''V W
)''W X
;''X Y
}(( 	
})) 
}** í
JC:\Template\templateNetCore\src\Template.Infra.Data\Mapping\TemplateMap.cs
	namespace		 	
Template		
 
.		 
Cadastro		 
.		 
Infra		 !
.		! "
Data		" &
.		& '
Mapping		' .
{

 
public 

sealed 
class 
TemplateMap #
:$ %#
EntityTypeConfiguration& =
<= >
TemplateEntidade> N
>N O
{ 
public 
override 
void 
Map  
(  !
EntityTypeBuilder! 2
<2 3
TemplateEntidade3 C
>C D
builderE L
)L M
{ 	
builder 
. 
ToTable 
( 
$str &
)& '
. 
HasKey 
( 
x 
=> 
x 
. 
Id !
)! "
;" #
builder 
. 
Property 
( 
x 
=> 
x  
.  !
Id! #
)# $
. 
HasColumnName 
( 
$str #
)# $
. 
HasColumnType 
( 
$str $
)$ %
;% &
builder 
. 
Property 
( 
x 
=> !
x" #
.# $
Nome$ (
)( )
. 
HasColumnName 
( 
$str %
)% &
. 
HasColumnType 
( 
$str ,
), -
. 

IsRequired 
( 
) 
; 
builder 
. 
Property 
( 
x 
=> 
x  
.  !
	Descricao! *
)* +
. 
HasColumnName 
( 
$str *
)* +
.   
HasColumnType   
(   
$str   -
)  - .
.!! 

IsRequired!! 
(!! 
)!! 
;!! 
builder## 
.$$ 
Property$$ 
($$ 
x$$ 
=>$$ 
x$$  
.$$  !
DataInclusao$$! -
)$$- .
.%% 
HasColumnType%% 
(%% 
$str%% *
)%%* +
.&& 
HasColumnName&& 
(&& 
$str&& )
)&&) *
.'' 

IsRequired'' 
('' 
)'' 
;'' 
builder)) 
.** 
Property** 
(** 
x** 
=>** 
x**  
.**  !
DataAlteracao**! .
)**. /
.++ 
HasColumnType++ 
(++ 
$str++ *
)++* +
.,, 
HasColumnName,, 
(,, 
$str,, )
),,) *
;,,* +
builder.. 
.// 
Property// 
(// 
x// 
=>// 
x//  
.//  !
Ativo//! &
)//& '
.00 
HasColumnType00 
(00 
$str00 $
)00$ %
.11 
HasColumnName11 
(11 
$str11 &
)11& '
.22 

IsRequired22 
(22 
)22 
;22 
builder44 
.55 
Property55 
(55 
x55 
=>55 
x55  
.55  !
	IdUsuario55! *
)55* +
.66 
HasColumnType66 
(66 
$str66 $
)66$ %
.77 
HasColumnName77 
(77 
$str77 +
)77+ ,
;77, -
}>> 	
}?? 
}@@ Ç
VC:\Template\templateNetCore\src\Template.Infra.Data\Repositories\TemplateRepository.cs
	namespace		 	
Template		
 
.		 
Cadastro		 
.		 
Infra		 !
.		! "
Data		" &
.		& '
Repositories		' 3
{

 
public 

sealed 
class 
TemplateRepository *
:+ ,
Base- 1
.1 2

Repository2 <
<< =
TemplateEntidade= M
>M N
,N O
ITemplateRepositoryP c
{ 
public 
TemplateContext 
_context '
{( )
get* -
=>. 0
(1 2
TemplateContext2 A
)A B
_dbB E
;E F
}G H
public 
TemplateRepository !
(! "
TemplateContext" 1
db2 4
)4 5
:6 7
base8 <
(< =
db= ?
)? @
{ 	
} 	
public 

IQueryable 
< 
TemplateEntidade *
>* +
Listar, 2
(2 3
PesquisaTemplate3 C
pesquisaD L
,L M
	PaginacaoN W
	paginacaoX a
)a b
{ 	
var 
	templates 
= 
_context $
.$ %
Template% -
.  !
Where! &
(& '
t( )
=>) +
t+ ,
., -
Nome- 1
==2 4
(5 6
pesquisa6 >
.> ?
Nome? C
??D F
tG H
.H I
NomeI M
)M N
||( *
t( )
.) *
	IdUsuario* 3
==4 6
(7 8
pesquisa8 @
.@ A
	IdUsuarioA J
??K M
tN O
.O P
	IdUsuarioP Y
)Y Z
||( *
t( )
.) *
DataInclusao* 6
==7 9
(: ;
pesquisa; C
.C D
DataInclusaoD P
??Q S
tT U
.U V
DataInclusaoV b
)b c
)& '
;' (
if 
( 
! 
string 
. 
IsNullOrEmpty %
(% &
	paginacao& /
./ 0
Search0 6
)6 7
)7 8
	templates 
= 
	templates %
.% &
Where& +
(+ ,
t, -
=>. 0
t1 2
.2 3
Nome3 7
.7 8
ToLower8 ?
(? @
)@ A
.A B
ContainsB J
(J K
	paginacaoK T
.T U
SearchLowerU `
)` a
||b d
te f
.f g
	Descricaog p
.p q
ToLowerq x
(x y
)y z
.z {
Contains	{ É
(
É Ñ
	paginacao
Ñ ç
.
ç é
SearchLower
é ô
)
ô ö
)
ö õ
;
õ ú
	paginacao!! 
.!! 
count!! 
=!! 
	templates!! '
.!!' (
Count!!( -
(!!- .
)!!. /
;!!/ 0
	templates## 
=## 
PaginacaoOrdenacao## *
.##* +
AplicarPaginacao##+ ;
<##; <
TemplateEntidade##< L
>##L M
(##M N
	templates##N W
,##W X
	paginacao##Y b
)##b c
;##c d
return%% 
	templates%% 
;%% 
}&& 	
}'' 
}(( ∫
MC:\Template\templateNetCore\src\Template.Infra.Data\UoW\UnitOfWorkCadastro.cs
	namespace 	
Template
 
. 
Cadastro 
. 
Infra !
.! "
Data" &
.& '
UoW' *
{ 
public		 

sealed		 
class		 
UnitOfWorkCadastro		 *
:		+ ,
IUnitOfWorkCadastro		- @
{

 
TemplateContext 
_db 
; 
public 
UnitOfWorkCadastro !
(! "
TemplateContext" 1
db2 4
)4 5
{ 	
_db 
= 
db 
; 
} 	
public 
void 
Commit 
( 
) 
{ 	
_db 
. 
SaveChanges 
( 
) 
; 
} 	
} 
} 